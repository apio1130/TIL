# DB Table Index 추가 대상 기준 정보 메모

## 핵심적인 기준 4가지
인덱스는 한 테이블당 보통 3~5개가 적당합니다.  
(정규화 정도나 테이블의 목적에 따라서는 개수가 달라질 수도 있습니다.)  
아래 4가지 기준을 사용하여 기준에 부합하는 컬럼을 인덱스로 설정하는 것이 좋습니다.

### 카디널리티 (Cardinality)
카디널리티가 높으면(↑) 인덱스 설정에 좋은 컬럼이다. (인덱스를 통해 불필요한 데이터의 대부분을 걸러낼 수 있음.)  
카디널리티가 높다 = 한 컬럼이 갖고 있는 값의 중복도가 낮음. (= 값들이 대부분 다른 값을 가짐.)  
카디널리티가 낮다 = 한 컬럼이 갖고 있는 값의 중복도가 높음. (= 값들이 거의 같은 값을 가짐 )

### 선택도 (Selectivity)
선택도가 낮으면(↓) 인덱스 설정에 좋은 컬럼이다. (일반적으로 5~10%가 적당함.)  
선택도가 높다 = 한 컬럼이 갖고 있는 값 하나로 여러 row가 찾아진다.  
선택도가 낮다 = 한 컬럼이 갖고 있는 값 하나로 적은 row가 찾아진다.

#### 선택도 계산법 (= 컬럼의 특정 값의 row 수 / 테이블의 총 row 수 * 100)
ex) 10개의 데이터에서 고유한 학번(grade) 컬럼, 2명씩 같은 이름(name) 컬럼, 5명씩 같은 나이(age) 컬럼인 경우  
- 학번(grade) 컬럼 선택도: 1 / 10 = 10%  
- 이름(name) 컬럼 선택도: 2 / 10 = 20%  
- 나이(age) 컬럼 선택도: 5 / 10 = 50%  

### 조회 활용도
조회 활용도가 높으면(↑) 인덱스 설정에 좋은 컬럼이다.  
해당 컬럼이 실제 작업에서 얼마나 활용되는지에 대한 값.  
(WHERE의 대상 컬럼으로 많이 활용되는지로 판단하면 된다.)

### 수정 빈도
수정 빈도가 낮으면(↓) 인덱스 설정에 좋은 컬럼이다.  
인덱스도 테이블이기 때문에, 인덱스로 지정된 컬럼의 값이 바뀌게 되면 인덱스 테이블도 새롭게 갱신되어야 하기 때문.


## 그 밖의 Index 명시 사항
WHERE에 자주 사용되는 컬럼에 사용하기.  
LIKE와 사용할 경우에는 %가 뒤에 사용되도록 하기. (앞에 사용되면 Full Scan)  
ORDER BY에 자주 사용되는 컬럼에 사용하기.  
JOIN에 자주 사용되는 컬럼에 사용하기.  
데이터의 변경이 잦은 컬럼에는 인덱스를 사용하지 않기.

## 참고
- https://velog.io/@jwpark06/%ED%9A%A8%EA%B3%BC%EC%A0%81%EC%9D%B8-DB-index-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0

